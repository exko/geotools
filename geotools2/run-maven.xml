<?xml version="1.0" encoding="UTF-8"?>
<project basedir="." default="all" name="master">
    <property environment="env"/>
    <target depends="init" name="build">        
        <exec executable="${maven}">
          <arg value="build"/> 
        </exec>
    </target>
    
    <target depends="init" name="allsite">
        <exec executable="${maven}">
          <arg value="allsite"/> 
        </exec>
    </target>
        
    <target name="init">
    <condition property="mavenbat">
        <os family="windows"/>
    </condition>
    <condition property="mavenunix">
        <os family="unix"/>
    </condition>
    <condition property="mavenmac"><and>
      <os family="mac"/>
      <not>
        <os family="unix"/>
      </not>
    </and>
  </condition>
  <condition property="maven" value="maven.bat">
    <not>
        <equals arg1="${mavenbat}" arg2="$${mavenbat}"/>
    </not>
    <!-- <istrue value="${mavenbat}"/> uncomment instead if you have ant 1.5+ -->
  </condition>
  <!-- I have no idea what the correct command for maven on a mac is so assumed it has more sense than windows
   if you know better please fix. -->
  <condition property="maven" value="${env.MAVEN_HOME}\bin\maven.bat">
      <or>
        <not>
            <equals arg1="${mavenunix}" arg2="$${mavenunix}"/>
        </not>
        <not>
            <equals arg1="${mavenmac}" arg2="$${mavenmac}"/>
        </not>
        <!-- <istrue value="${mavenunix}"/>
        <istrue value="${mavenmac}"/> as above -->
    </or>
  </condition>
	<echo message="maven = ${maven}"/>
</target>
</project>
