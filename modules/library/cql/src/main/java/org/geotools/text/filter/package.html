<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">

<HTML>
  <HEAD>
    <TITLE>package org.opengis.filter.cql</TITLE>
  </HEAD>
  <BODY>
    <H3>Common Query Language (CQL)</H3>
	This package implements the OGC_Common Catalogue Query Language. OGC CQL
	is the query language to be supported by all OGC Catalogue Interfaces in order to support search
	interoperability.
	<A HREF="http://www.opengeospatial.org/standards/cat">Catalogue Service Implementation Specification <b>(OGC 04-021r3)</b></A>:

    <H3>CQL BNF with SQL Extensions</H3>
    <P ALIGN="justify">
    The original BNF was extended thinking in a SQL where expression. The original BNF is reproduced to indicate 
    the extensions highlighted with bold characters.
    </P>

    <P ALIGN="justify">
    Extensions in original BNF
    <pre>
    <b>&#60;between predicate&#62; ::= 
    		&#60;attribute name&#62; [ NOT ] BETWEEN &#60;literal&#62; AND &#60; literal &#62; 
	</b>
    &#60;routine invocation&#62; ::= 
             &#60;geoop name&#62;&#60;georoutine argument list&#62;
           | &#60;relgeoop name&#62;&#60;relgeoop argument list&#62;
           | &#60;routine name&#62;&#60;argument list&#62;
           <b>| &#60;BBOX&#62; &#60;bbox argument list&#62;	</b>
           
    &#60;geoop name&#62; ::= 
           EQUAL | DISJOINT | INTERSECT | TOUCH | CROSS | 
           WITHIN | CONTAINS |OVERLAP | RELATE <b>[1]</b>
    <b>  
    &#60;bbox argument list&#62;::= 
       "(" &#60;attribute&#62; ","&#60;min X&#62; ","&#60;min Y&#62; ","&#60;max X&#62; ","&#60;max Y&#62;["," &#60;crs&#62;] ")"
    &#60;min X&#62; ::= &#60;signed numerical literal&#62; 
    &#60;min Y&#62; ::= &#60;signed numerical literal&#62; 
    &#60;max X&#62; ::= &#60;signed numerical literal&#62; 
    &#60;max Y&#62; ::= &#60;signed numerical literal&#62;
    &#60;crs&#62; ::= [2]  
    </b>  
      
    [1] RELATE is not supported (implementation in GeoTools is required)
    [2] If not supplied, the BoundingBox CRS is EPSG:4326.

    </pre>
    </P>

    <H3>Implementation Notes</H3>
    <P ALIGN="justify">
    The parser was generated using <A HREF="https://javacc.dev.java.net/">javacc</A>. 
    In expr.jjt file you can see the input grammar for javacc required to parse CQL with extensions.
    </P>
    
    <P ALIGN="justify">
    This implementation does not check <b>CRS</b>. The problem can be solved adding tokens (standards 
    simbols in grammar) or checking in semantic actions consturction (FilterBuilder). The last solution
	requires to fix a bug retrieved the correspondent factory for crs (srs).    
    </P>

  </BODY>
</HTML>
